# Ионосферные предвестники землетрясений

Данный репозиторий создан в рамках работы по изучению аномалий в ионосфере, предшествующих землетрясению (ионосферных предвестников землетрясений). Мы предоставляем доступ к обработанному нами набору данных, содержащему:
- показания ионозондов за 1998-2019 год;
- 7,6млн записей (по 320тыс записей в среднем на год) ионосферных характеристик, преобразованных к табличному формату;
- восстановленные данные: без пропущенных значений и приведенные к 15-минутной частоте показаний.

Набор данных состоит из показаний 100 ионозондов: часть из них находилась в зоне подготовки [[1]](#prep) сильных землетрясений (магнитуды ⩾ 5); другие зонды находятся в радиусе до 750 километров от упомянутых выше
и нужны для вычисления некоторых предвестников землетрясений.

Полученная выборка позволяет построить хотя бы один из трех рассматриваемых предвестников землетрясений для 891 землетрясения, сведения о которых также доступны в репозитории. Табличный формат данных и подсчитанные предвестники землетрясений делают возможным дальнейшее применение любых алгоритмов машинного обучения.

## Источники данных

Данные, собранные ионозондами, были взяты с сайта [Национальных центров экологической информации США](https://www.ngdc.noaa.gov/stp/iono/ionogram.html) (NCEI). 

Информация о землетрясениях была взята с сайта [Геологической службы США](https://www.usgs.gov/natural-hazards/earthquake-hazards/earthquakes) (USGS).

## Описание данных
Все данные хранятся в формате ```.csv``` таблиц, с символом ```\t``` в качестве разделителя.

### Информация о землетрясениях
Папка ```USGS_dataset/``` содержит полный список землетрясений, в период которых были получены данные о состоянии ионосферы.

Характеристики землетрясений описаны в таблице ```earthquakes_description```. Также в папке находятся две вспомогательные таблицы ```sondes_in_eq_prep_zone``` и ```sondes_pairs```, которые связывают землетрясение (_earthquake_id_) и зонды, находившиеся в зоне подготовки этого землетрясения (_sonde_). 

Последние две таблицы содержат такие атрибуты, как:
- (```eq_lat```, ```eq_lon```) и (```sonde_lat```, ```sonde_lon```) - координаты эпицентра землетрясения и зонда соответственно;
- ```prep_zone``` - радиус (в километрах) зоны подготовки землетрясения;
- ```eq_sonde_dist``` - расстояние (в километрах) от эпицентра землетрясения до ионозонда.

В таблице ```sondes_pairs``` данные о зондах помечены индексами 1 и 2 и соответствуют ионозонду в зоне подготовки землетрясения (1) и ионозонду вне зоны подготовки, но на близком расстоянии к первому (2). 

### Данные с ионозондов
Данные, полученные с ионозондов, можно найти в папке ```/NCEI_dataset/```.

Таблица ```sondes_names```  хранит общую информацию о ионозондах и имеет следующую структуру:

| sonde |	lat |	lon |	name |
|-------|-----|-----|------|
| кодовый номер ионозонда | широта, на которой расположен зонд | долгота, на которой расположен зонд | имя региона, в котором расположен зонд | 

В папке ```ionosondes_data/``` для каждого ионозонда существует файл ```{sonde}.csv```, где _sonde_ - кодовый номер зонда. Такой файл хранит данные, собранные ионозондом (49 характеристик ионосферы), и момент времени, когда эти данные были собраны. Каждый файл имеет одинаковый набор атрибутов, приведенный ниже.


| sonde |	year | date |	h |	m | _parameter1_ | ... | _parameter49_ |
|-------|------|------|---|---|--------------|---|---------------|
| кодовый номер ионозонда | год | дата в формате _гггг-мм-дд_ | час | минута | 1ый из 49 показателей | ... | 49ый из 49 показателей | 

Директория ``ionosondes_data_corrected/`` содержит скорректированные данные ионозондов: частота записей приведена к 15-минутной; пропущенные и недостающие значения заполнены с помощью линейной интерполяции. На данный момент была произведена коррекция только одной ионосферной характеристики: _foF2_, однако с помощью скрипта, расположенного в файле ``/scripts/dataset_correction.ipynb`` возможно восстановление всех ионосферных параметров. Для каждого параметра, помимо восстановленного значения, указана ожидаемая ошибка восстановления (атрибут формата _{parameter}\_err_).


### Предвестники землетрясений

В папке ```/earthquake_precursors/``` можно найти подсчитанные нами признаки, которые могут стать предвестниками землетрясений. Функции, позволяющие вычислить такие признаки по данным с ионозондов, расположены в файле ```/scripts/precursors_calculation.ipynb```

```running_avg/``` содержит файлы ```{sonde}_runing_avg.csv```, в которых для каждого ионозонда подсчитано скользящее среднее параметра foF2 за предшествующие 15 дней (в одинаковый момент времени). Как показано в статье _D. Davidenko & S. Pulinets_ [[2]](#mask), перед землетрясением происходит аномальное отклонение текущих значений foF2 от средних, что и является предвестником землетрясения. 

Для каждой временной точки, заданной с помощью (даты, часа, минуты) в таблице содержатся атрибуты:
- ```foF2``` - значение показателя foF2 в текущий момент;
- ```foF2_running_avg``` - скользящее среднее за предыдущие 15 дней в то же время;
- ```foF2_n_days``` - количество дней (из 15ти предшествующих), в которые значение foF2 было известно.

Другой показатель, аномальное значение которого является предвестником землетрясения, можно найти в папке ```correlation/```. В работе _S. Pulinets_ [[3]](#corr) было показано, что если два ионозонда находятся достаточно близко друг от друга, но при этом один из них попадает в зону подготовки землетрясения, а другой - нет, то корреляциях их показаний (в частности, foF2) снижается. 

В папке ```correlation/``` для близко расположенных пар зондов (sonde1, sonde2) в каждую дату подсчитаны следующие характеристики:
- ```foF2_corr``` - корреляция показаний пары ионозондов в текущую дату;	
- ```foF2_n_hours``` - количество часов, за которые доступны показания с обоих зондов;
- ```foF2_total_time_points``` - общее количество временных точек, для которых доступны показания с обоих зондов.

Третий показатель предсказывает землетрясение по отклонению показаний двух групп ионозондов: первая группа состоит из зондов в зоне подготовки землетрясения (s1), вторая - на некотором небольшом расстоянии от них (s2). Нами был выбран порог в 750 км; однако в представленных данных во вторую группу объединены все зонды, находящиеся в на расстоянии [prep_zone, max(prep_zone + 750, 2*prep_zone)] от эпицентра землетрясения, где prep_zone - радиус зоны подготовки землетрясения. 

Данные, подготовленные для расчета описанной выше характеристики, можно найти в папке ```groups_comparison/```. Для каждого землетрясения создан файл ``{earthquake_id}_s1s2.csv``, который содержит:
- отдельные показания зондов каждой из групп (в те дни, когда они не находились под влиянием каких-либо других землетрясений);
- усредненные показания каждой из групп;
- количество зондов в каждой из групп, показания которых доступны в выбранный момент времени;
- метка ``pre_eq/not_eq``, указывающая, относится ли день к периоду предсказания землетрясения (до 10 дней перед землетрясением).

## Список литературы

<a name="prep">[1]</a>  Zubkov S. I. Miachkin V. I. Dobrovolsky, I. P. Estimation of the size of earthquake
preparation zones. Pure and Applied Geophysics, 117(5):1025--1044, 1979.

<a name="mask">[2]</a>  Dmitry Davidenko and Sergey Pulinets. Deterministic variability of the ionosphere before strong (M ⩾  6) earthquakes in the regions of Greece and Italy based on many years of observation (in russian). Geomagnetism and Aeronomy, 59:529–544, January 2019.

<a name="corr">[3]</a> Sergey Pulinets. Ionospheric precursors of earthquakes; recent advances in theory and practical applications. Terrestrial Atmospheric And Oceanic Sciences, 15:445--467, September 2004.
